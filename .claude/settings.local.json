{
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(python -m pytest:*)",
      "Bash(docker cp:*)",
      "Bash(tee:*)",
      "Bash(python3:*)",
      "Bash(docker images:*)",
      "Bash(docker tag:*)",
      "Bash(docker image prune:*)",
      "Bash(docker run:*)",
      "Bash(docker compose logs:*)",
      "Bash(docker compose exec:*)",
      "Bash(docker compose:*)",
      "Bash(curl:*)",
      "Bash(PGPASSWORD=YBp44BSqEBvCXab psql:*)",
      "Bash(git status:*)",
      "Bash(grep:*)",
      "Bash(npm run build)",
      "Read(//etc/dokploy/compose/perenco-opsflux-gwxapr/**)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(docker exec:*)",
      "Bash(xargs:*)",
      "Bash(cat:*)",
      "Bash(docker ps:*)",
      "Bash(docker restart:*)",
      "Bash(docker logs:*)",
      "Bash(echo:*)",
      "WebFetch(domain:github.com)",
      "Bash(docker inspect:*)",
      "Bash(npm install:*)",
      "Bash(paste:*)",
      "Bash(git diff frontend/src/app/(auth)/login/components/user-auth-form.tsx)",
      "Bash(git diff:*)",
      "Bash(python scripts/create_company_tables.py:*)",
      "Bash(/etc/dokploy/compose/perenco-opsflux-gwxapr/code/backend/app/api/routes/companies.py )",
      "Bash(/etc/dokploy/compose/perenco-opsflux-gwxapr/code/backend/scripts/create_company_tables.py )",
      "Bash(/etc/dokploy/compose/perenco-opsflux-gwxapr/code/backend/scripts/register_third_parties_module.py)",
      "Bash(chmod:*)",
      "Bash(timeout 30 docker logs:*)",
      "Bash(for file in app/api/routes/*.py)",
      "Bash(do echo \"=== $file ===\" awk '/@require_permission/,/^def / {print NR\"\"\"\": \"\"\"\"$0}' \"$file\")"
    ],
    "deny": [],
    "ask": []
  },
  "decisionMaking": {
    "autonomy": "full",
    "mode": "overnight_autonomous",
    "priorities": [
      "robustesse",
      "professionnalisme",
      "ergonomie",
      "visibilité d'utilisation",
      "intuitivité",
      "sécurité",
      "maintenabilité"
    ],
    "guidelines": {
      "makeDecisionsAutonomously": true,
      "commitAfterStableFeatures": true,
      "installDependenciesAsNeeded": true,
      "fixBugsWhenEncountered": true,
      "addErrorHandling": true,
      "documentComplexCode": true,
      "useTypeScriptStrictMode": true,
      "followExistingPatterns": true,
      "useDokployAPI": true
    }
  },
  "dokployAPI": {
    "url": "http://72.60.188.156:3000/api",
    "apiKeyEnvVar": "API_DOKPLOY",
    "usage": "Utiliser l'API Dokploy pour toutes les opérations Docker (logs, restart, status, etc.) au lieu des commandes docker directes. L'API key est dans .env"
  },
  "dockerOperations": {
    "CRITICAL_RULE": "TOUJOURS utiliser l'API Dokploy pour TOUTES les opérations Docker/Compose",
    "WHY": "Les commandes docker compose directes sans -p flag créent des containers avec des noms incorrects et corrompent le déploiement",
    "MANDATORY": [
      "JAMAIS exécuter 'docker compose build' sans -p perenco-opsflux-gwxapr",
      "JAMAIS exécuter 'docker compose up' sans -p perenco-opsflux-gwxapr",
      "JAMAIS exécuter 'docker compose down' sans -p perenco-opsflux-gwxapr",
      "JAMAIS exécuter 'docker compose restart' sans -p perenco-opsflux-gwxapr",
      "TOUJOURS vérifier docker ps pour s'assurer que SEULS les containers perenco-opsflux-gwxapr-* existent"
    ],
    "CORRECT_PROJECT_NAME": "perenco-opsflux-gwxapr",
    "CORRECT_COMMANDS": {
      "build": "docker compose -p perenco-opsflux-gwxapr build SERVICE",
      "up": "docker compose -p perenco-opsflux-gwxapr up -d SERVICE",
      "down": "docker compose -p perenco-opsflux-gwxapr down",
      "restart": "docker compose -p perenco-opsflux-gwxapr restart SERVICE",
      "logs": "docker compose -p perenco-opsflux-gwxapr logs SERVICE"
    },
    "ALTERNATIVE_PREFERRED": "Utiliser l'API Dokploy (clé dans .env: API_DOKPLOY) pour éviter tout risque d'erreur de nom de projet",
    "VERIFICATION": "Après chaque opération Docker, vérifier avec 'docker ps' qu'aucun container 'code-*' n'existe"
  }
}
