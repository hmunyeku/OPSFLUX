# ============================================================================
# OpsFlux - Configuration Environment Variables
# ============================================================================
# Copiez ce fichier vers .env et ajustez les valeurs selon votre environnement
#
# Variables obligatoires marquees avec: REQUIRED
# Variables optionnelles ont des valeurs par defaut
# ============================================================================

# ============================================================================
# ENVIRONMENT & STACK
# ============================================================================
# Mode: local, development, staging, production
ENVIRONMENT=production

# Nom du stack Docker (utilise pour les labels Traefik)
# REQUIRED
STACK_NAME=opsflux

# Domaine principal (ex: opsflux.io, monapp.com)
# REQUIRED - URLs generees: api.DOMAIN, app.DOMAIN, adminer.DOMAIN
DOMAIN=opsflux.io

# Tag des images Docker
TAG=latest

# ============================================================================
# DOCKER IMAGES
# ============================================================================
# Noms des images Docker (peuvent etre des registres prives)
# REQUIRED
DOCKER_IMAGE_BACKEND=opsflux-backend
DOCKER_IMAGE_FRONTEND=opsflux-frontend
DOCKER_IMAGE_ADMINER=opsflux-adminer

# ============================================================================
# DATABASE - PostgreSQL
# ============================================================================
# Serveur PostgreSQL
# Pour DB locale (profile "local"): db
# Pour DB externe: hostname ou IP de votre serveur PostgreSQL
# REQUIRED
POSTGRES_SERVER=db

# Port PostgreSQL (default: 5432)
POSTGRES_PORT=5432

# Nom de la base de donnees
POSTGRES_DB=opsflux

# Utilisateur PostgreSQL
# REQUIRED
POSTGRES_USER=opsflux_user

# Mot de passe PostgreSQL
# REQUIRED - Changez cette valeur en production!
POSTGRES_PASSWORD=changethis123

# Port expose sur l'hote (uniquement avec profile "local")
POSTGRES_EXPOSE_PORT=5432

# ============================================================================
# CACHE - Redis
# ============================================================================
# Serveur Redis
# Pour Redis local (profile "local"): redis
# Pour Redis externe: hostname ou IP de votre serveur Redis
# REQUIRED
REDIS_HOST=redis

# Port Redis (default: 6379)
REDIS_PORT=6379

# Mot de passe Redis (optionnel, vide par defaut)
REDIS_PASSWORD=

# Port expose sur l'hote (uniquement avec profile "local")
REDIS_EXPOSE_PORT=6379

# ============================================================================
# SECURITY
# ============================================================================
# Cle secrete pour JWT et encryption
# REQUIRED - Generez une cle unique: openssl rand -hex 32
SECRET_KEY=changethis-super-secret-key-for-development-only-min-32-chars

# ============================================================================
# ADMIN - Premier Super Utilisateur
# ============================================================================
# Email du premier admin (cree automatiquement au demarrage)
# REQUIRED
FIRST_SUPERUSER=admin@opsflux.com

# Mot de passe du premier admin
# REQUIRED - Changez cette valeur!
FIRST_SUPERUSER_PASSWORD=AdminPass123456!

# ============================================================================
# FRONTEND & API
# ============================================================================
# URL complete du frontend (pour les emails et redirections)
# REQUIRED
FRONTEND_HOST=https://app.opsflux.io

# URL de l'API pour le frontend (build time)
# Optionnel - par defaut utilise https://api.${DOMAIN}
NEXT_PUBLIC_API_URL=https://api.opsflux.io

# Origines CORS autorisees (separes par virgule)
# Ajoutez localhost pour le developpement local
BACKEND_CORS_ORIGINS=https://app.opsflux.io

# ============================================================================
# PROJECT
# ============================================================================
PROJECT_NAME=OpsFlux

# ============================================================================
# EMAIL (Optionnel)
# ============================================================================
# Configuration SMTP pour l'envoi d'emails
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# Email expediteur
EMAILS_FROM_EMAIL=noreply@opsflux.io
EMAILS_FROM_NAME=OpsFlux

# ============================================================================
# MONITORING (Optionnel)
# ============================================================================
# Sentry DSN pour le tracking d'erreurs
SENTRY_DSN=

# ============================================================================
# 2FA SMS (Optionnel)
# ============================================================================
# Configuration Twilio pour l'authentification 2FA par SMS
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ============================================================================
# CELERY WORKERS (Optionnel)
# ============================================================================
# Niveau de log des workers Celery (debug, info, warning, error)
CELERY_LOG_LEVEL=info

# Concurrence des workers (nombre de processus paralleles)
CELERY_HIGH_CONCURRENCY=2
CELERY_DEFAULT_CONCURRENCY=4
CELERY_LOW_CONCURRENCY=2

# ============================================================================
# TRAEFIK (Optionnel)
# ============================================================================
# Activer/desactiver Traefik (pour tests locaux sans proxy)
TRAEFIK_ENABLE=true

# ============================================================================
# ADMINER (Optionnel)
# ============================================================================
# Theme Adminer
ADMINER_DESIGN=pepa-linha-dark

# Port expose pour Adminer (uniquement avec profile "local" ou "adminer")
ADMINER_PORT=8080

# ============================================================================
# EXEMPLES DE CONFIGURATION
# ============================================================================
#
# --- DEVELOPPEMENT LOCAL ---
# Utilisez: docker-compose --profile local up -d
#
# ENVIRONMENT=local
# DOMAIN=localhost
# POSTGRES_SERVER=db
# REDIS_HOST=redis
# FRONTEND_HOST=http://localhost:3000
# BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:3001
# NEXT_PUBLIC_API_URL=http://localhost:8000
#
# --- PRODUCTION AVEC DB EXTERNE ---
# Utilisez: docker-compose up -d (sans --profile local)
#
# ENVIRONMENT=production
# DOMAIN=monapp.com
# POSTGRES_SERVER=postgres.example.com
# POSTGRES_USER=prod_user
# POSTGRES_PASSWORD=super_secure_password_here
# REDIS_HOST=redis.example.com
# REDIS_PASSWORD=redis_secure_password
# FRONTEND_HOST=https://app.monapp.com
# BACKEND_CORS_ORIGINS=https://app.monapp.com
#
# ============================================================================
